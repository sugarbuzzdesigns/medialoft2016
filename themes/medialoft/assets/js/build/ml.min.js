var $=jQuery,ml={};!function($){ml.elms={$win:$(window),$html:$("html"),$body:$("body"),$document:$(document),$bodyScrollElement:$("html, body"),$loader:$("#loader")},ml.env={init:function(){this.winHeight=ml.elms.$win.height(),this.winWidth=ml.elms.$win.width(),this.isTouch="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,this.tapClick=this.isTouch?"touchend":"click",window.addEventListener("orientationchange",function(){$("body").trigger("mlorientationchange")},!1),this.setTouchClass(),this.setVideoAspectRatioClass(),$("video").on("contextmenu",function(e){e.preventDefault()})},setTouchClass:function(){this.isTouch?ml.elms.$html.addClass("isTouch"):ml.elms.$html.addClass("noTouch")},setVideoAspectRatioClass:function(){var screenAspectRatio=this.winWidth/this.winHeight;screenAspectRatio>2||1.2>screenAspectRatio?(ml.elms.$html.addClass("video-scaled"),ml.elms.$html.removeClass("video-fullwidth")):(ml.elms.$html.addClass("video-fullwidth"),ml.elms.$html.removeClass("video-scaled"))}},ml.mainMenu={init:function(){this.$mainMenuBtn=$("main-menu-btn"),this.$mainMenu=$(".main-menu"),this.$menuLink=$(".main-menu li a"),this.$menuOverlay=$("#menu-overlay"),this.$mainMenuOpen=$(".main-menu .open-menu"),this.$mainMenuClose=$(".main-menu .close-menu"),this.openClass="main-menu-open",this.bindEvents()},bindEvents:function(){var _this=this;_this.$mainMenuOpen.on("mouseover touchstart",function(){_this.openMainMenu()}),_this.$menuOverlay.on("mouseover",function(e){e.preventDefault(),e.stopPropagation(),"mobile"!==ML_vars.device&&_this.closeMainMenu()}),_this.$mainMenuClose.on("touchstart",function(){_this.closeMainMenu()}),_this.$menuLink.on("click",function(){_this.deselectMenuItems($(this))})},openMainMenu:function(){ml.elms.$body.addClass(this.openClass),this.$menuOverlay.stop().fadeTo("fast",1)},closeMainMenu:function(){console.log("close main menu"),ml.elms.$body.removeClass(this.openClass),this.$menuOverlay.stop().fadeTo("fast",0)},deselectMenuItems:function($link){$link.parent().siblings().removeClass("active")}},ml.rightMenu={init:function(){this.$rightMenu=$(".right-menu"),this.$rightMenuBtn=$(".right-menu-btn"),this.$rightMenuOpen=$(".right-menu-btn .open-menu"),this.$rightMenuClose=$(".right-menu-btn .close-menu"),this.openClass="right-menu-open",this.bindEvents()},bindEvents:function(){var _this=this;_this.$rightMenuOpen.on("click",function(e){e.preventDefault(),_this.openRightMenu()}),_this.$rightMenuClose.on("click",function(e){e.preventDefault(),_this.closeRightMenu()})},openRightMenu:function(){ml.elms.$body.addClass(this.openClass)},closeRightMenu:function(){ml.elms.$body.removeClass(this.openClass)}},ml.menus={activateMenuItem:function($menuItem){$menuItem.addClass("active"),$menuItem.siblings().removeClass("active")}},ml.video={init:function(){this.checkVideoCanPlay()},activeVideo:"",checkVideoCanPlay:function(){$("video").each(function(i,vid){$(vid).on("canplay",function(){$(this).addClass("canplay"),console.log("can play videos")})})},pauseActiveVideo:function(){this.activeVideo.pause()},playVideo:function(video){video.play(),this.activeVideo=video}},ml.utils={debounce:function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}},setBreakpoint:function(){this.breakpoint=window.getComputedStyle(document.querySelector("body"),":before").getPropertyValue("content").replace(/\"/g,""),"mobile"===ML_vars.device&&ml.elms.$body.addClass("mobile").removeClass("phablet tablet desktop"),"phablet"===ML_vars.device&&ml.elms.$body.addClass("phablet").removeClass("mobile tablet desktop"),"tablet"===ML_vars.device&&ml.elms.$body.addClass("tablet").removeClass("phablet mobile desktop"),"desktop"===ML_vars.device&&ml.elms.$body.addClass("desktop").removeClass("phablet tablet mobile")},isTouch:function(){return ml.elms.$html.is(".touch")?!0:!1},getClosestSection:function($section){var scrollPos=ml.elms.$win.scrollTop(),closest=$section.first();$section.each(function(){var distanceFromScreenTop=Math.abs($(this).offset().top-scrollPos);distanceFromScreenTop<Math.abs(closest.offset().top-scrollPos)&&(closest=$(this))}),this.closestSection=closest},scrollToClosestSection:function(){var scrollPos=this.closestSection.offset().top;$("html, body").animate({scrollTop:scrollPos})}};var myEfficientFn=ml.utils.debounce(function(){ml.utils.setBreakpoint(),ml.env.winWidth=ml.elms.$win.width(),ml.env.setVideoAspectRatioClass(),ml.elms.$body.is(".page-work")&&"desktop"===ML_vars.device&&ml.Work.resizeWorkPage()},350);$(function(){ml.env.init(),ml.mainMenu.init(),ml.rightMenu.init(),ml.elms.$win.load(function(){console.log("window loaded"),ml.elms.$loader.fadeOut(),ml.elms.$body.addClass("loaded"),ml.elms.$win.trigger("mlLoaded")});var onLoadTimeout=setTimeout(function(){console.log("timeout done"),ml.elms.$loader.fadeOut(),ml.elms.$body.addClass("loaded")},500);ml.elms.$win.on("resize",myEfficientFn).resize(),ml.elms.$win.on("scroll",myEfficientFn).scroll();var url=$.url(window.location);"1"===url.param("getdevice")&&alert("is touch: "+ml.env.isTouch+"   env: "+ML_vars.device)})}(jQuery);
//# sourceMappingURL=ml.min.js.map